@tailwind base;
@tailwind components;
@tailwind utilities;

/* Dark theme (default) */
:root {
  --background: #000000;
  --foreground: #ffffff;
  --glass-bg: rgba(0, 0, 0, 0.6);
  --glass-border: rgba(255, 255, 255, 0.1);
  --glass-shadow: rgba(0, 0, 0, 0.5);

  /* Theme colors */
  --primary: #4DFFFF; /* Electric blue */
  --primary-hover: rgba(77, 255, 255, 0.1);
  --primary-glow: rgba(77, 255, 255, 0.4);
  --text-primary: #ffffff;
  --text-secondary: #9ca3af; /* Gray-400 */
  --text-muted: #6b7280; /* Gray-500 */
  --surface: #000000;
  --surface-elevated: #18181b; /* Zinc-900 */
  --border: rgba(255, 255, 255, 0.1);

  /* Chat-specific dark mode colors */
  --chat-input-bg: rgba(0, 0, 0, 0.8);
  --chat-user-bubble-bg: transparent; /* Same as background */
  --chat-user-bubble-text: #ffffff;
  --chat-ai-bubble-bg: transparent;
  --chat-ai-bubble-text: #ffffff;
  --chat-ai-bubble-border: #4DFFFF;
}

/* Light theme (admin only) */
:root.light-mode {
  --background: #f5f5f5; /* Light gray, almost white */
  --foreground: #000000;
  --glass-bg: rgba(255, 255, 255, 0.9);
  --glass-border: rgba(0, 0, 0, 0.1);
  --glass-shadow: rgba(0, 0, 0, 0.1);

  /* Light theme colors */
  --primary: #1e3a5f; /* Navy blue for accents */
  --primary-hover: rgba(30, 58, 95, 0.1);
  --primary-glow: rgba(30, 58, 95, 0.4);
  --text-primary: #1a1a1a; /* Near black for text */
  --text-secondary: #4b5563; /* Gray-600 */
  --text-muted: #6b7280; /* Gray-500 */
  --surface: #ffffff;
  --surface-elevated: #ffffff;
  --border: rgba(0, 0, 0, 0.15);

  /* Chat-specific light mode colors - Glassmorphism */
  --chat-input-bg: rgba(255, 255, 255, 0.9);
  --chat-user-bubble-bg: linear-gradient(135deg, rgba(30, 58, 95, 0.95), rgba(25, 50, 82, 0.88));
  --chat-user-bubble-text: #ffffff;
  --chat-ai-bubble-bg: rgba(255, 255, 255, 0.75);
  --chat-ai-bubble-text: #1a1a1a;
  --chat-ai-bubble-border: rgba(30, 58, 95, 0.25);
  --chat-ai-bubble-shadow: 0 4px 24px rgba(0, 0, 0, 0.08);
  --chat-user-bubble-shadow: 0 4px 20px rgba(30, 58, 95, 0.3);
}

@layer base {
  body {
    background-color: var(--background);
    color: var(--foreground);
  }
}

@layer utilities {
  .glass-morphism {
    background: var(--glass-bg);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    border: 1px solid var(--glass-border);
    box-shadow: 0 8px 32px 0 var(--glass-shadow);
  }

  .chat-bubble {
    @apply rounded-2xl p-3 md:p-4;
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    transition: transform 0.2s ease, box-shadow 0.2s ease;
  }

  /* User message bubble - glassmorphic navy gradient */
  .chat-bubble.user-bubble {
    background: linear-gradient(135deg, rgba(30, 58, 95, 0.95), rgba(25, 50, 82, 0.88));
    box-shadow: 0 4px 20px rgba(30, 58, 95, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.1);
    border: 1px solid rgba(255, 255, 255, 0.1);
  }

  /* AI message bubble - frosted glass effect */
  .chat-bubble.ai-bubble {
    background: rgba(255, 255, 255, 0.75);
    box-shadow: 0 4px 24px rgba(0, 0, 0, 0.08), inset 0 1px 0 rgba(255, 255, 255, 0.5);
    border: 1px solid rgba(30, 58, 95, 0.15);
  }

  /* Dark mode overrides */
  :root:not(.light-mode) .chat-bubble.user-bubble,
  :root:not(.light-mode) .chat-bubble.ai-bubble {
    background: transparent;
    box-shadow: none;
    border: none;
  }

  :root:not(.light-mode) .chat-bubble.ai-bubble {
    border: 1px solid var(--chat-ai-bubble-border);
  }

  .chat-bubble-tail {
    position: relative;
  }

  .chat-bubble-tail::after {
    content: '';
    position: absolute;
    bottom: 0;
    width: 0;
    height: 0;
    border: 10px solid transparent;
  }

  .chat-bubble-tail.left::after {
    left: -10px;
    border-right-color: rgba(255, 255, 255, 0.75);
  }

  :root:not(.light-mode) .chat-bubble-tail.left::after {
    border-right-color: transparent;
  }

  .chat-bubble-tail.right::after {
    display: none; /* Remove triangle for user messages */
  }

  /* Animated floating orbs background (light mode only) */
  .chat-bg-orbs {
    position: relative;
    overflow: hidden;
  }

  .chat-bg-orbs::before,
  .chat-bg-orbs::after {
    content: '';
    position: absolute;
    border-radius: 50%;
    opacity: 0;
    pointer-events: none;
    z-index: 0;
  }

  :root.light-mode .chat-bg-orbs::before {
    width: 300px;
    height: 300px;
    background: radial-gradient(circle, rgba(30, 58, 95, 0.08) 0%, transparent 70%);
    top: 10%;
    right: -100px;
    opacity: 1;
    animation: float-orb-1 25s ease-in-out infinite;
  }

  :root.light-mode .chat-bg-orbs::after {
    width: 400px;
    height: 400px;
    background: radial-gradient(circle, rgba(77, 200, 255, 0.06) 0%, transparent 70%);
    bottom: 20%;
    left: -150px;
    opacity: 1;
    animation: float-orb-2 30s ease-in-out infinite;
  }

  @keyframes float-orb-1 {
    0%, 100% {
      transform: translate(0, 0) scale(1);
    }
    25% {
      transform: translate(-30px, 40px) scale(1.1);
    }
    50% {
      transform: translate(20px, -20px) scale(0.95);
    }
    75% {
      transform: translate(-10px, 30px) scale(1.05);
    }
  }

  @keyframes float-orb-2 {
    0%, 100% {
      transform: translate(0, 0) scale(1);
    }
    33% {
      transform: translate(40px, -30px) scale(1.08);
    }
    66% {
      transform: translate(-20px, 20px) scale(0.92);
    }
  }

  /* Send button glow animation */
  .send-button-glow {
    box-shadow: 0 0 8px var(--primary), 0 0 15px var(--primary-glow);
    animation: pulse-glow 2s ease-in-out infinite;
  }

  @keyframes pulse-glow {
    0%, 100% {
      box-shadow: 0 0 8px var(--primary), 0 0 15px var(--primary-glow);
    }
    50% {
      box-shadow: 0 0 20px var(--primary), 0 0 30px var(--primary-glow);
    }
  }

  /* Living glow aura for input box */
  .living-glow-aura {
    background: linear-gradient(90deg, var(--primary), var(--primary), var(--primary));
    background-size: 200% 100%;
    animation: living-glow 4s ease-in-out infinite;
  }

  @keyframes living-glow {
    0%, 100% {
      opacity: 0.3;
      background-position: 0% 50%;
    }
    25% {
      opacity: 0.5;
    }
    50% {
      opacity: 0.4;
      background-position: 100% 50%;
    }
    75% {
      opacity: 0.6;
    }
  }

  /* PWA Animations */
  .animate-slide-up {
    animation: slideUp 0.3s ease-out;
  }

  .animate-slide-down {
    animation: slideDown 0.3s ease-out;
  }

  @keyframes slideUp {
    from {
      transform: translateY(100%);
      opacity: 0;
    }
    to {
      transform: translateY(0);
      opacity: 1;
    }
  }

  @keyframes slideDown {
    from {
      transform: translateY(-100%);
      opacity: 0;
    }
    to {
      transform: translateY(0);
      opacity: 1;
    }
  }

  /* Mobile-first touch optimizations */
  @media (hover: none) and (pointer: coarse) {
    /* Larger touch targets on mobile - only for nav/button-like links, NOT inline text links */
    button,
    a[role="button"],
    nav a,
    .touch-target {
      min-height: 44px;
      min-width: 44px;
    }

    /* Disable tap highlight on buttons (but keep links clickable) */
    button, [role="button"] {
      -webkit-tap-highlight-color: transparent;
      -webkit-touch-callout: none;
      outline: none;
    }

    /* Disable text selection for better UX */
    .no-select {
      -webkit-user-select: none;
      user-select: none;
      -webkit-touch-callout: none;
    }
  }

  /* Ensure links are always clickable */
  a {
    cursor: pointer;
    pointer-events: auto;
  }

  /* Disable tap highlight globally for interactive elements */
  button, a, [role="button"], .tap-none {
    -webkit-tap-highlight-color: transparent;
  }

  /* Safe area insets for notched devices */
  @supports (padding: env(safe-area-inset-top)) {
    .safe-area-top {
      padding-top: env(safe-area-inset-top);
    }

    .safe-area-bottom {
      padding-bottom: env(safe-area-inset-bottom);
    }

    .safe-area-left {
      padding-left: env(safe-area-inset-left);
    }

    .safe-area-right {
      padding-right: env(safe-area-inset-right);
    }

    .pb-safe {
      padding-bottom: calc(2rem + env(safe-area-inset-bottom));
    }
  }

  /* Smooth scrolling for mobile */
  @media (prefers-reduced-motion: no-preference) {
    html {
      scroll-behavior: smooth;
    }
  }

  /* Reduce motion for accessibility */
  @media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
    }
  }
}
